# VanillaJS로 가상돔 구현해보기 (가상돔을 이용하여 성능 높여보기)

## 가상돔이 렌더링 성능을 높이는 방식
일단 상태가 바뀌어 브라우저가 화면을 렌더링 하는 과정을 살펴보자.
1. 상태가 변경된다.
2. `document.appendChild()`혹은 `innerHTML`등이 동작하여 DOM 조작을 요청한다.
3. 브라우저는 DOM에 변경이 있는 것을 확인하여 렌더트리를 그린다.
4. 화면을 보여주기 위해 레이아웃 과정을 거쳐 Element가 있어야 할 위치와 크기를 계산한다.
5. 계산한 Element를 실제로 페인팅하는 페인트 작업이 일어난다.

만약에 가상돔을 사용하지 않으면 우리는 특정 상태가 바뀌었을 때 실제 돔을 innerHTML이나 document객체 안에 있는 메서드들을 이용해서 다뤄야한다.
<br/>
이는 실제 DOM을 건드리는 것이기 때문에 한번 요청해서 내부를 조작할 때마다 그 부분에서는 위에 있는 3~5가 반복된다.
3~5과정을 최대한 줄이려면 어떻게 해야할까?
바뀐 부분을 계산해서 한번에 DOM조작을 하면 3~5과정이 한번만 일어나지않을까 생각해볼 수 있다.
이에 대한 아이디어로 가상돔을 쓸 수 있다.
실제로 브라우저가 다루는 DOM이 아닌 DOM과 비슷한 구조로 이루어진 JS 객체를 메모리에 올려놓고 바뀐 부분을 감지하여 객체를 바꿔놓은 이후에
이를 한번에 실제 DOM에 끼워넣는 방식으로 수많은 렌더링 과정의 횟수를 줄일 수 있다.